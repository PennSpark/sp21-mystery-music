{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\egg\\\\Desktop\\\\UPenn\\\\sem 4\\\\pcl\\\\mystery music\\\\my-app\\\\src\\\\Game.js\";\nimport React from 'react';\nimport Board from './Board';\nimport Swal from \"sweetalert2\";\nimport './Game.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst option_letters = ['A', 'B', 'C', 'D'];\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.newRound = () => {\n      var scores = this.state.scores; // get updated scores from db \n\n      axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId).then(response => {\n        console.log(response);\n\n        for (var i = 0; i < response.data.size; i++) {\n          scores[i] = response.data.players[i].score;\n        }\n\n        this.setState({\n          scores: scores\n        });\n      }).catch(error => {\n        console.log(error);\n      }); // use nextTurn to set new answer from db when running\n\n      this.nextTurn(); // this.state.answer = Math.floor(this.state.size * Math.random());\n      // this.state.currentSong = \"random song test\";\n\n      console.log(\"new answer: \" + this.state.answer); // update state\n\n      this.setState({\n        scores: scores,\n        round: this.state.round + 1\n      });\n      console.log(\"round\" + this.state.round); // starts new timer for next round\n\n      this.timer();\n    };\n\n    this.timer = () => {\n      clearInterval(this.timer2);\n      var timeleft = this.state.time;\n      var timer = setInterval(() => {\n        if (timeleft <= 0) {\n          clearInterval(timer); // add new state if i want to display timer on screen? \n          // implement if there is time\n\n          console.log(\"timer finish!\"); // end game if 10 rounds have been played\n\n          if (this.state.round < 10) {\n            this.newRound();\n          } else {\n            // displays winner of game, top points scorer\n            this.checkForWinner();\n          }\n        } else {\n          if (timeleft % 5 === 0) {\n            console.log(timeleft);\n          }\n        }\n\n        timeleft -= 1;\n      }, 1000);\n    };\n\n    this.updateScore = player => {\n      const updateScoreThing = {\n        joinCode: this.roomId,\n        playerName: player,\n        score: this.score\n      };\n      axios.post('http://localhost:5001/games/updateScore', updateScoreThing).then(res => console.log(res.data)); // End the game once there is a winner\n      // this.gameOver = true;\n      // this.newRound(winner);\t\n    };\n\n    this.checkForWinner = () => {\n      var winner = 0;\n\n      for (var i = 0; i < this.state.size; i++) {\n        if (this.state.scores[i] > this.state.scores[winner]) {\n          winner = this.state.squares[i];\n        } else {\n          winner = this.state.squares[0];\n        }\n      } // All rounds have been completed\n\n\n      this.gameOver = true;\n\n      if (this.props.isRoomCreator) {\n        Swal.fire({\n          position: 'top',\n          allowOutsideClick: false,\n          title: winner + ' won!',\n          text: 'Want to play again?',\n          showCancelButton: true,\n          confirmButtonColor: 'rgb(208,33,41)',\n          cancelButtonColor: '#aaa',\n          cancelButtonText: 'Nope',\n          confirmButtonText: 'Yea!',\n          width: 275\n        }).then(result => {\n          // Start a new round\n          if (result.value) {\n            this.props.pubnub.publish({\n              message: {\n                reset: true\n              },\n              channel: this.props.gameChannel\n            });\n          } else {\n            // End the game\n            this.props.pubnub.publish({\n              message: {\n                endGame: true\n              },\n              channel: this.props.gameChannel\n            });\n            axios.delete('http://localhost:5001/games/updateScore' + this.databaseGameId).then(res => console.log(res));\n          }\n        });\n      } else {\n        Swal.fire({\n          position: 'top',\n          allowOutsideClick: false,\n          title: winner + ' won!',\n          text: 'Waiting for a new round...',\n          confirmButtonColor: 'rgb(208,33,41)',\n          width: 275\n        });\n      }\n    };\n\n    this.publishMove = index => {\n      var scores = this.state.scores;\n      scores[index] = scores[index] + 1;\n      this.setState({\n        // update scores\n        scores: scores\n      }); // no need to check correctness since done in new move,\n      // just update scores based on info from pubnub message \n      // this function is called in componentDidMount\n    };\n\n    this.onMakeMove = index => {\n      var squares = this.state.squares;\n      console.log(index);\n      this.setState({\n        guess: index\n      });\n\n      if (index === this.state.answer) {\n        console.log(\"correct!\");\n        console.log(\"guess: \" + index);\n        this.score += 1;\n        console.log(\"this.score: \" + this.score);\n        this.updateScore(this.player);\n      } // if (index == this.answer) { \n      //   console.log(\"correct!\");\n      //   // Update chosen button to show that it's been clicked\n      //   // squares[index] = 'X';\n      //   this.score += 1;\n      //    this.setState({\n      //      squares: squares,\n      //    });\n      // Publish move to the channel\n      // this.props.pubnub.publish({\n      //   message: {\n      //     player: index,\n      //    \n      //   },\n      //   channel: this.props.gameChannel\n      // });  \n      // }\n\n    };\n\n    this.player = this.props.player;\n    this.roomId = this.props.roomId;\n    this.databaseGameId = this.props.databaseGameId;\n    this.score = 0; // idk if this is necessary, remove?\n\n    this.gameOver = false; // this.answer = 0;\n\n    this.nextTurn();\n    this.state = {\n      // squares contains the player names in the game for the game board thing !\n      // these items must be in state in order to update the screen (render())\n      // when state is also updated\n      squares: option_letters,\n      size: 0,\n      round: 1,\n      scores: [],\n      guess: \"\",\n      answer: 0,\n      currentSong: \"\",\n      time: 10\n    };\n    console.log(\"size: \" + this.state.size);\n    console.log(\"player: \" + this.player);\n  } // function for each new round\n\n\n  // retrieve next player song pair info, to be used in newRound()\n  nextTurn() {\n    axios.get('http://localhost:5001/games/getRandomPair/' + this.databaseGameId).then(response => {\n      console.log(response); //player id of song\n      //console.log(\"id \" + response.data[0].playerId);\n      //player name of song if needed\n\n      console.log(\"name \" + response.data[this.state.round * 2].playerName); //name of song if needed\n\n      console.log(\"song \" + response.data[this.state.round * 2].songName);\n      var answer = 0;\n\n      for (var i = 0; i < this.state.size; i++) {\n        if (response.data[this.state.round * 2].playerName.localeCompare(this.state.squares[i]) === 0) {\n          answer = i;\n        }\n      }\n\n      this.setState({\n        answer: answer,\n        currentSong: response.data[this.state.round * 2].songName\n      });\n      console.log(\"got pair\");\n    }).catch(error => {\n      console.log(error);\n    });\n  } // function runs whenever a new element is added to the DOM\n  // maybe switch to componentDidUpdate if more appropriate?\n\n\n  componentDidMount() {\n    var squares = Array(this.state.size).fill(\"loading names\");\n    var scores = Array(this.state.size).fill(\"loading scores\");\n    this.timer2 = setInterval(() => {\n      if (this.state.size === 4) {\n        this.timer();\n      }\n\n      axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId).then(response => {\n        console.log(\"hi there\");\n        console.log(response);\n\n        for (var i = 0; i < response.data.size; i++) {\n          console.log(response.data.players[i].playerName);\n          squares[i] = response.data.players[i].playerName;\n          scores[i] = 0;\n        }\n\n        this.setState({\n          size: response.data.size,\n          squares: squares,\n          scores: scores\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    }, 1000); //gets size(num of players in game) and updates squares\n    // TODO:\n    // this is used to initally populate game board, rn it doesn't update\n    // board for players already ingame when new players join\n\n    axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId).then(response => {\n      console.log(\"hi there\");\n      console.log(response);\n\n      for (var i = 0; i < response.data.size; i++) {\n        console.log(response.data.players[i].playerName);\n        squares[i] = response.data.players[i].playerName;\n        scores[i] = 0;\n      }\n\n      this.setState({\n        size: response.data.size,\n        squares: squares,\n        scores: scores\n      });\n    }).catch(error => {\n      console.log(error);\n    }); // what is used to get info from other players so we can appropriately\n    // update the scoreboard based on whether or not other people got answers right\n\n    this.props.pubnub.getMessage(this.props.gameChannel, msg => {\n      // edit publish move to publish scoreboard instead?\n      // old copied code, currently publishes move to opponents' boards\n      // but not actually bc i commented out the code that sends the message    \n      this.publishMove(msg.message.index); // Start a new game\n      // TODO: update this appropriately with new values in state and etc\n      // idk if necessary? if no time just delete and don't give option to replay game\n\n      if (msg.message.reset) {\n        this.setState({\n          // update players\n          squares: this.fillArray(4),\n          round: 0\n        });\n        this.score = 0;\n        this.gameOver = false;\n        Swal.close();\n      } // End the game and go back to the lobby\n      else if (msg.message.endGame) {\n          Swal.close();\n          this.props.endGame();\n        }\n    });\n  } // Update db score if answer is correct\n  // not necessary bc i think i can use pubnub to keep track of scores?\n  // side note is pubnub even necessary with backend???\n  // so yeah bc there's no route to retrieve scores i'm not using this function!\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container-center-horizontal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"game-screen-1 screen\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex-row-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"mystery-music-logo3-1\",\n              src: \"https://anima-uploads.s3.amazonaws.com/projects/60760a93d4d62b3f8b0aea2b/releases/608797e5c0ff3678276ff026/img/mysterymusic-logo3-1@2x.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"overlap-group\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                class: \"text-1\",\n                children: \"Guess Whose Playlist?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex-row-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"overlap-group1\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"vector-197\",\n                src: \"https://anima-uploads.s3.amazonaws.com/projects/60760a93d4d62b3f8b0aea2b/releases/6078ee0985f5e7f39b088386/img/vector-197@2x.svg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"album-cover\",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: [\"Round: \", this.state.round, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 405,\n                    columnNumber: 39\n                  }, this), \"Song: \", this.state.currentSong]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"play-bar\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"overlap-group3-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"rectangle\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"overlap-group2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"leaderboard-example\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"overlap-group3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"name-1 karla-normal-black-24px\",\n                    children: this.state.squares[0]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"number-1 karla-bold-black-24px\",\n                    children: this.state.scores[0]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"flex-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"name-2 karla-normal-black-24px\",\n                    children: this.state.squares[1]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"number-2 karla-bold-black-24px\",\n                    children: this.state.scores[1]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"flex-row-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"egret karla-normal-black-24px\",\n                    children: this.state.squares[2]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"number karla-bold-black-24px\",\n                    children: this.state.scores[2]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"flex-row-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"name karla-normal-black-24px\",\n                    children: this.state.squares[3]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"number-3 karla-bold-black-24px\",\n                    children: this.state.scores[3]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 432,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board\",\n            children: [/*#__PURE__*/_jsxDEV(Board, {\n              squares: this.state.squares,\n              size: this.props.size,\n              onClick: index => this.onMakeMove(index)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"countdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/egg/Desktop/UPenn/sem 4/pcl/mystery music/my-app/src/Game.js"],"names":["React","Board","Swal","axios","option_letters","Game","Component","constructor","props","newRound","scores","state","get","databaseGameId","then","response","console","log","i","data","size","players","score","setState","catch","error","nextTurn","answer","round","timer","clearInterval","timer2","timeleft","time","setInterval","checkForWinner","updateScore","player","updateScoreThing","joinCode","roomId","playerName","post","res","winner","squares","gameOver","isRoomCreator","fire","position","allowOutsideClick","title","text","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","width","result","value","pubnub","publish","message","reset","channel","gameChannel","endGame","delete","publishMove","index","onMakeMove","guess","currentSong","songName","localeCompare","componentDidMount","Array","fill","getMessage","msg","fillArray","close","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Board from './Board';\r\nimport Swal from \"sweetalert2\";  \r\nimport './Game.css';\r\nimport axios from 'axios';\r\n\r\nconst option_letters = ['A', 'B', 'C', 'D'];\r\n\r\nclass Game extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.player = this.props.player;\r\n    this.roomId = this.props.roomId;\r\n    this.databaseGameId = this.props.databaseGameId;\r\n    this.score = 0; // idk if this is necessary, remove?\r\n    this.gameOver = false;\r\n    // this.answer = 0;\r\n\r\n    this.nextTurn();\r\n\r\n    this.state = {\r\n      // squares contains the player names in the game for the game board thing !\r\n      // these items must be in state in order to update the screen (render())\r\n      // when state is also updated\r\n      squares: option_letters, \r\n      size : 0,\r\n      round : 1,\r\n      scores: [],\r\n      guess: \"\",\r\n      answer: 0,\r\n      currentSong: \"\",\r\n      time: 10\r\n    };\r\n\r\n    console.log(\"size: \" + this.state.size);\r\n    console.log(\"player: \" + this.player);\r\n  }\r\n\r\n  // function for each new round\r\n  newRound = () => {\r\n    var scores = this.state.scores;\r\n\r\n    // get updated scores from db \r\n    axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId)\r\n    .then(response => {\r\n\r\n      console.log(response);\r\n      for (var i = 0; i < response.data.size; i++){\r\n        scores[i] = response.data.players[i].score;\r\n      }\r\n\r\n      this.setState({\r\n        scores: scores\r\n      })\r\n     \r\n    })\r\n    .catch((error) => {\r\n        console.log(error);\r\n    });\r\n\r\n\r\n    // use nextTurn to set new answer from db when running\r\n    this.nextTurn();\r\n    // this.state.answer = Math.floor(this.state.size * Math.random());\r\n    // this.state.currentSong = \"random song test\";\r\n    console.log(\"new answer: \" + this.state.answer);\r\n\r\n    // update state\r\n    this.setState({\r\n      scores: scores,\r\n      round: this.state.round + 1\r\n    });\r\n\r\n    console.log(\"round\" + this.state.round);\r\n\r\n    // starts new timer for next round\r\n    this.timer();\r\n  }\r\n\r\n  // function used to determine the end of each round\r\n  timer = () => {\r\n    clearInterval(this.timer2);\r\n    var timeleft = this.state.time;\r\n    var timer = setInterval(() => {\r\n      if (timeleft <= 0) {\r\n        clearInterval(timer);\r\n        // add new state if i want to display timer on screen? \r\n        // implement if there is time\r\n\r\n        console.log(\"timer finish!\");\r\n        // end game if 10 rounds have been played\r\n        if (this.state.round < 10) {\r\n\r\n        this.newRound();\r\n      } else {\r\n        // displays winner of game, top points scorer\r\n        this.checkForWinner();\r\n      }\r\n      } else {\r\n        if (timeleft % 5 === 0) {\r\n          console.log(timeleft);\r\n        }\r\n        \r\n      }\r\n      timeleft -= 1;\r\n    }, 1000);\r\n  }\r\n  \r\n  // retrieve next player song pair info, to be used in newRound()\r\n  nextTurn() {\r\n    axios.get('http://localhost:5001/games/getRandomPair/' + this.databaseGameId)\r\n    .then(response => {\r\n      console.log(response);\r\n      //player id of song\r\n      //console.log(\"id \" + response.data[0].playerId);\r\n      //player name of song if needed\r\n      console.log(\"name \" + response.data[this.state.round * 2].playerName);\r\n      //name of song if needed\r\n      console.log(\"song \" + response.data[this.state.round * 2].songName);\r\n\r\n      var answer = 0;\r\n      for (var i = 0; i < this.state.size; i++) {\r\n        if (response.data[this.state.round * 2].playerName.localeCompare(this.state.squares[i]) === 0) {\r\n          answer = i;\r\n        }\r\n      }\r\n\r\n      this.setState({\r\n        answer: answer,\r\n        currentSong: response.data[this.state.round * 2].songName\r\n      });\r\n\r\n      console.log(\"got pair\");\r\n    })\r\n    .catch((error) => {\r\n        console.log(error);\r\n    });\r\n  }\r\n\r\n  // function runs whenever a new element is added to the DOM\r\n  // maybe switch to componentDidUpdate if more appropriate?\r\n  componentDidMount() {\r\n\r\n    var squares = Array(this.state.size).fill(\"loading names\");\r\n    var scores = Array(this.state.size).fill(\"loading scores\");\r\n\r\n    this.timer2 = setInterval(() => {\r\n      if (this.state.size === 4) {\r\n        this.timer();\r\n      }\r\n\r\n      axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId)\r\n      .then(response => {\r\n        console.log(\"hi there\");\r\n        console.log(response);\r\n\r\n        for (var i = 0; i < response.data.size; i++){\r\n          console.log(response.data.players[i].playerName);\r\n          squares[i] = response.data.players[i].playerName;\r\n          scores[i] = 0;\r\n        }\r\n        \r\n          this.setState({\r\n            size : response.data.size,\r\n            squares: squares,\r\n            scores: scores\r\n          });\r\n      \r\n      })\r\n      .catch((error) => {\r\n          console.log(error);\r\n      });\r\n    }, 1000);\r\n\r\n    //gets size(num of players in game) and updates squares\r\n    // TODO:\r\n    // this is used to initally populate game board, rn it doesn't update\r\n    // board for players already ingame when new players join\r\n    axios.get('http://localhost:5001/games/getGame/' + this.databaseGameId)\r\n    .then(response => {\r\n      console.log(\"hi there\");\r\n      console.log(response);\r\n\r\n      for (var i = 0; i < response.data.size; i++){\r\n        console.log(response.data.players[i].playerName);\r\n        squares[i] = response.data.players[i].playerName;\r\n        scores[i] = 0;\r\n      }\r\n      \r\n        this.setState({\r\n          size : response.data.size,\r\n          squares: squares,\r\n          scores: scores\r\n        });\r\n     \r\n    })\r\n    .catch((error) => {\r\n        console.log(error);\r\n    });\r\n\r\n    // what is used to get info from other players so we can appropriately\r\n    // update the scoreboard based on whether or not other people got answers right\r\n    this.props.pubnub.getMessage(this.props.gameChannel, (msg) => {\r\n\r\n      // edit publish move to publish scoreboard instead?\r\n      // old copied code, currently publishes move to opponents' boards\r\n      // but not actually bc i commented out the code that sends the message    \r\n      this.publishMove(msg.message.index);\r\n\r\n      // Start a new game\r\n      // TODO: update this appropriately with new values in state and etc\r\n      // idk if necessary? if no time just delete and don't give option to replay game\r\n      if(msg.message.reset){\r\n        this.setState({\r\n          // update players\r\n          squares: this.fillArray(4),\r\n          round: 0\r\n        });\r\n\r\n        this.score = 0;\r\n        this.gameOver = false;\r\n        Swal.close()\r\n      }\r\n\r\n      // End the game and go back to the lobby\r\n      else if(msg.message.endGame){\r\n        Swal.close();\r\n        this.props.endGame();\r\n      }\r\n    });\r\n  }\r\n\r\n\t// Update db score if answer is correct\r\n  // not necessary bc i think i can use pubnub to keep track of scores?\r\n  // side note is pubnub even necessary with backend???\r\n  // so yeah bc there's no route to retrieve scores i'm not using this function!\r\n  updateScore = (player) => {\r\n\r\n    const updateScoreThing = {\r\n      joinCode: this.roomId,\r\n      playerName: player,\r\n      score: this.score\r\n    };\r\n\r\n    axios.post('http://localhost:5001/games/updateScore', updateScoreThing)\r\n      .then(res => console.log(res.data));\r\n      \r\n\r\n\t\t// End the game once there is a winner\r\n\t\t// this.gameOver = true;\r\n\t\t// this.newRound(winner);\t\r\n  }\r\n\r\n  // bad function name, actually just displays pop up for when game is \r\n  checkForWinner = () => {\r\n    var winner = 0;\r\n\r\n    for(var i = 0; i < this.state.size; i++) {\r\n      if (this.state.scores[i] > this.state.scores[winner]) {\r\n        winner = this.state.squares[i];\r\n      } else {\r\n        winner = this.state.squares[0];\r\n      }\r\n    }\r\n\r\n    // All rounds have been completed\r\n      this.gameOver = true;\r\n      if(this.props.isRoomCreator) {\r\n        Swal.fire({      \r\n              position: 'top',\r\n              allowOutsideClick: false,\r\n              title: winner + ' won!',\r\n              text: 'Want to play again?',\r\n              showCancelButton: true,\r\n              confirmButtonColor: 'rgb(208,33,41)',\r\n              cancelButtonColor: '#aaa',\r\n              cancelButtonText: 'Nope',\r\n              confirmButtonText: 'Yea!',\r\n              width: 275,\r\n            }).then((result) => {\r\n              // Start a new round\r\n              if (result.value) {\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    reset: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n              }\r\n      \r\n              else{\r\n                // End the game\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    endGame: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n                axios.delete('http://localhost:5001/games/updateScore'+ this.databaseGameId)\r\n                .then(res => console.log(res));\r\n              }\r\n            })      \r\n          \r\n      } else {\r\n      Swal.fire({  \r\n            position: 'top',\r\n            allowOutsideClick: false,\r\n            title: winner + ' won!',\r\n            text: 'Waiting for a new round...',\r\n            confirmButtonColor: 'rgb(208,33,41)',\r\n            width: 275\r\n          });\r\n        }\r\n  };\r\n   \r\n  // Publishing an opponent's score onto scoreboard\r\n  // setState should rerender screen automatically\r\n  publishMove = (index) => {\r\n    var scores = this.state.scores;\r\n    scores[index] = scores[index] + 1;\r\n\r\n    this.setState({\r\n      // update scores\r\n      scores: scores\r\n    });\r\n\r\n    // no need to check correctness since done in new move,\r\n    // just update scores based on info from pubnub message \r\n    // this function is called in componentDidMount\r\n\r\n  }\r\n\r\n  // function runs when a button on the gameboard is clicked\r\n  // don't need to check correctness, just update current state.guess\r\n  // TODO: have some visible display to buttons being clicked? rn it's just console\r\n  onMakeMove = (index) => {\r\n    var squares = this.state.squares;\r\n\r\n    console.log(index);\r\n\r\n    this.setState({\r\n      guess: index\r\n    });\r\n\r\n    if (index === this.state.answer) {\r\n\r\n      console.log(\"correct!\");\r\n      console.log(\"guess: \" + index);\r\n      this.score += 1;\r\n      console.log(\"this.score: \" + this.score);\r\n\r\n      this.updateScore(this.player);\r\n\r\n    }\r\n\r\n    // if (index == this.answer) { \r\n    //   console.log(\"correct!\");\r\n    //   // Update chosen button to show that it's been clicked\r\n    //   // squares[index] = 'X';\r\n\r\n    //   this.score += 1;\r\n\r\n    //    this.setState({\r\n    //      squares: squares,\r\n    //    });\r\n\r\n      // Publish move to the channel\r\n      // this.props.pubnub.publish({\r\n      //   message: {\r\n      //     player: index,\r\n      //    \r\n      //   },\r\n      //   channel: this.props.gameChannel\r\n      // });  \r\n    // }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      \r\n      <div className=\"game\">\r\n      <div class=\"container-center-horizontal\">\r\n      <div class=\"game-screen-1 screen\">\r\n        <div class=\"flex-row-5\">\r\n          <img\r\n            class=\"mystery-music-logo3-1\"\r\n            src=\"https://anima-uploads.s3.amazonaws.com/projects/60760a93d4d62b3f8b0aea2b/releases/608797e5c0ff3678276ff026/img/mysterymusic-logo3-1@2x.png\"\r\n          />\r\n          <div class=\"overlap-group\">\r\n            <h1 class=\"text-1\">Guess Whose Playlist?</h1>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex-row-4\">\r\n          <div class=\"overlap-group1\">\r\n            <img\r\n              class=\"vector-197\"\r\n              src=\"https://anima-uploads.s3.amazonaws.com/projects/60760a93d4d62b3f8b0aea2b/releases/6078ee0985f5e7f39b088386/img/vector-197@2x.svg\"\r\n            />\r\n          </div>\r\n          <div class=\"flex-col\">\r\n            <div class=\"album-cover\">\r\n              <h1>\r\n            Round: {this.state.round} <br/>\r\n            Song: {this.state.currentSong}\r\n            </h1>\r\n            </div>\r\n            <div class=\"play-bar\">\r\n              <div class=\"overlap-group3-1\">\r\n                <div class=\"rectangle\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"overlap-group2\">\r\n            {/* scoreboard update */}\r\n            <div class=\"leaderboard-example\">\r\n              <div class=\"overlap-group3\">\r\n                <div class=\"name-1 karla-normal-black-24px\">{this.state.squares[0]}</div>\r\n                <div class=\"number-1 karla-bold-black-24px\">{this.state.scores[0]}</div>\r\n              </div>\r\n              <div class=\"flex-row\">\r\n                <div class=\"name-2 karla-normal-black-24px\">{this.state.squares[1]}</div>\r\n                <div class=\"number-2 karla-bold-black-24px\">{this.state.scores[1]}</div>\r\n              </div>\r\n              <div class=\"flex-row-1\">\r\n                <div class=\"egret karla-normal-black-24px\">{this.state.squares[2]}</div>\r\n                <div class=\"number karla-bold-black-24px\">{this.state.scores[2]}</div>\r\n              </div>\r\n              <div class=\"flex-row-2\">\r\n                <div class=\"name karla-normal-black-24px\">{this.state.squares[3]}</div>\r\n                <div class=\"number-3 karla-bold-black-24px\">{this.state.scores[3]}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        {/* <button type=\"button\" value=\"Start Game\" onClick={() => this.timer()} >start timer  </button> */}\r\n        <div className=\"board\">\r\n          <Board\r\n              squares={this.state.squares}\r\n              size={this.props.size}\r\n              onClick={index => this.onMakeMove(index)}\r\n            />   \r\n            <div id=\"countdown\"></div>      \r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n    \r\n \r\n    \r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;"]},"metadata":{},"sourceType":"module"}