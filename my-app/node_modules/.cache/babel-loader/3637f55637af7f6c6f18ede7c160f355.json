{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\egg\\\\Desktop\\\\UPenn\\\\sem 4\\\\pcl\\\\mystery music\\\\my-app\\\\src\\\\Game.js\";\nimport React from 'react';\nimport Board from './Board';\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.newRound = winner => {// // set title for displaying people who were correct\n      // let title = (winner === null) ? 'Tie game!' : `Player ${winner} won!`;\n      // // Show this if new round\n      // if(this.gameOver){\n      //   Swal.fire({  \n      //     position: 'top',\n      //     allowOutsideClick: false,\n      //     title: title,\n      //     text: 'Waiting for a new round...',\n      //     confirmButtonColor: 'rgb(208,33,41)',\n      //     width: 275\n      //   });\n      //   // this.turn = ;\n      // } \n      // // Show this to the room creator\n      // else if(this.props.isRoomCreator && this.gameOver){\n      //   Swal.fire({      \n      //     position: 'top',\n      //     allowOutsideClick: false,\n      //     title: title,\n      //     text: 'Ready for next round?',\n      //     showCancelButton: true,\n      //     confirmButtonColor: 'rgb(208,33,41)',\n      //     cancelButtonColor: '#aaa',\n      //     cancelButtonText: 'Nope',\n      //     confirmButtonText: 'Yea!',\n      //     width: 275,\n      //   }).then((result) => {\n      //     // Start a new round\n      //     if (result.value) {\n      //       this.props.pubnub.publish({\n      //         message: {\n      //           reset: true\n      //         },\n      //         channel: this.props.gameChannel\n      //       });\n      //     }\n      //     else{\n      //       // End the game\n      //       this.props.pubnub.publish({\n      //         message: {\n      //           endGame: true\n      //         },\n      //         channel: this.props.gameChannel\n      //       });\n      //     }\n      //   })      \n      // }\n    };\n\n    this.announceWinner = winner => {// TODO: Implement function\n      // End the game once there is a winner\n      // this.gameOver = true;\n      // this.newRound(winner);\t\n    };\n\n    this.checkForWinner = () => {// Possible winning endgames (max round, score?)\n      // this.counter++;\n      // // All rounds have been completed\n      // if(this.counter === 9){\n      //   this.gameOver = true;\n      //   this.newRound(null);\n      // }\n    };\n\n    this.publishMove = (index, piece) => {\n      const squares = this.state.squares;\n      squares[index] = piece;\n      this.setState({\n        // update scores\n        squares: squares\n      });\n      this.checkForWinner();\n    };\n\n    this.onMakeMove = index => {\n      const squares = this.state.squares; // Check if the square is empty and if we can make a move\n\n      if (squares[index]) {\n        squares[index] = 'X';\n        this.setState({\n          squares: squares //   whosTurn: !this.state.whosTurn\n\n        }); // // Other player's turn to make a move\n        // this.turn = (this.turn === 'X') ? 'O' : 'X';\n        // Publish move to the channel\n\n        this.props.pubnub.publish({\n          message: {\n            index: index,\n            piece: 'X',\n            turn: this.turn\n          },\n          channel: this.props.gameChannel\n        }); // Check if there is a winner\n\n        this.checkForWinner();\n      }\n    };\n\n    this.state = {\n      squares: Array(8).fill(\"temp\") // these are what people click on\n      // get list of scores for players in game\n      // imagine we can get this/store it in database?\n\n    };\n    this.round = 0;\n    this.scores = Array(this.props.size).fill(0);\n    this.gameOver = false;\n    this.counter = 0;\n  }\n\n  nextTurn(n) {// get next player from api calls\n  }\n\n  componentDidMount() {\n    this.props.pubnub.getMessage(this.props.gameChannel, msg => {\n      // Publish move to the opponent's board\n      this.publishMove(msg.message.index, msg.message.piece); // Start a new round\n\n      if (msg.message.reset) {\n        this.setState({\n          // update scores\n          squares: Array(this.props.size).fill(3)\n        });\n        this.gameOver = false;\n        this.round += 1;\n        Swal.close();\n      } // End the game and go back to the lobby\n      else if (msg.message.endGame) {\n          Swal.close();\n          this.props.endGame();\n        }\n    });\n  }\n\n  render() {\n    let status; // Change to current round\n\n    status = `${this.round}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: [/*#__PURE__*/_jsxDEV(Board, {\n          squares: this.state.squares,\n          size: this.props.size,\n          onClick: index => this.onMakeMove(index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"status-info\",\n          children: [\"Round: \", status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scores-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"SCORES\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/egg/Desktop/UPenn/sem 4/pcl/mystery music/my-app/src/Game.js"],"names":["React","Board","Swal","Game","Component","constructor","props","newRound","winner","announceWinner","checkForWinner","publishMove","index","piece","squares","state","setState","onMakeMove","pubnub","publish","message","turn","channel","gameChannel","Array","fill","round","scores","size","gameOver","counter","nextTurn","n","componentDidMount","getMessage","msg","reset","close","endGame","render","status"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Board from './Board';\r\nimport Swal from \"sweetalert2\";  \r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n      squares: Array(8).fill(\"temp\"), // these are what people click on\r\n      // get list of scores for players in game\r\n      // imagine we can get this/store it in database?\r\n\r\n    };\r\n    this.round = 0;\r\n    this.scores = Array(this.props.size).fill(0);\r\n    this.gameOver = false;\r\n    this.counter = 0;\r\n  }\r\n\r\n  nextTurn(n) {\r\n    // get next player from api calls\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.pubnub.getMessage(this.props.gameChannel, (msg) => {\r\n      // Publish move to the opponent's board\r\n      \r\n      this.publishMove(msg.message.index, msg.message.piece);\r\n      \r\n\r\n      // Start a new round\r\n      if(msg.message.reset){\r\n        this.setState({\r\n          // update scores\r\n          squares: Array(this.props.size).fill(3),\r\n        });\r\n\r\n        this.gameOver = false;\r\n        this.round += 1;\r\n        Swal.close()\r\n      }\r\n\r\n      // End the game and go back to the lobby\r\n      else if(msg.message.endGame){\r\n        Swal.close();\r\n        this.props.endGame();\r\n      }\r\n    });\r\n  }\r\n\r\n  newRound = (winner) => {\r\n    // // set title for displaying people who were correct\r\n    // let title = (winner === null) ? 'Tie game!' : `Player ${winner} won!`;\r\n    // // Show this if new round\r\n    // if(this.gameOver){\r\n    //   Swal.fire({  \r\n    //     position: 'top',\r\n    //     allowOutsideClick: false,\r\n    //     title: title,\r\n    //     text: 'Waiting for a new round...',\r\n    //     confirmButtonColor: 'rgb(208,33,41)',\r\n    //     width: 275\r\n    //   });\r\n    //   // this.turn = ;\r\n    // } \r\n\r\n    // // Show this to the room creator\r\n    // else if(this.props.isRoomCreator && this.gameOver){\r\n    //   Swal.fire({      \r\n    //     position: 'top',\r\n    //     allowOutsideClick: false,\r\n    //     title: title,\r\n    //     text: 'Ready for next round?',\r\n    //     showCancelButton: true,\r\n    //     confirmButtonColor: 'rgb(208,33,41)',\r\n    //     cancelButtonColor: '#aaa',\r\n    //     cancelButtonText: 'Nope',\r\n    //     confirmButtonText: 'Yea!',\r\n    //     width: 275,\r\n    //   }).then((result) => {\r\n    //     // Start a new round\r\n    //     if (result.value) {\r\n    //       this.props.pubnub.publish({\r\n    //         message: {\r\n    //           reset: true\r\n    //         },\r\n    //         channel: this.props.gameChannel\r\n    //       });\r\n    //     }\r\n\r\n    //     else{\r\n    //       // End the game\r\n    //       this.props.pubnub.publish({\r\n    //         message: {\r\n    //           endGame: true\r\n    //         },\r\n    //         channel: this.props.gameChannel\r\n    //       });\r\n    //     }\r\n    //   })      \r\n    // }\r\n   }\r\n\r\n\t// Update score for the winner\r\n  announceWinner = (winner) => {\r\n    // TODO: Implement function\r\n\r\n\t\t// End the game once there is a winner\r\n\t\t// this.gameOver = true;\r\n\t\t// this.newRound(winner);\t\r\n  }\r\n  \r\n  checkForWinner = () => {\r\n    // Possible winning endgames (max round, score?)\r\n\r\n        // this.counter++;\r\n        // // All rounds have been completed\r\n        // if(this.counter === 9){\r\n        //   this.gameOver = true;\r\n        //   this.newRound(null);\r\n        // }\r\n  };\r\n   \r\n  // Opponent's move is published to the board\r\n  publishMove = (index, piece) => {\r\n    const squares = this.state.squares;\r\n\r\n    squares[index] = piece;\r\n\r\n    this.setState({\r\n      // update scores\r\n      squares: squares,\r\n    });\r\n\r\n    this.checkForWinner()\r\n  }\r\n\r\n  onMakeMove = (index) => {\r\n    const squares = this.state.squares;\r\n\r\n    // Check if the square is empty and if we can make a move\r\n    if(squares[index]) { \r\n      squares[index] = 'X';\r\n\r\n       this.setState({\r\n         squares: squares,\r\n      //   whosTurn: !this.state.whosTurn\r\n       });\r\n  \r\n      // // Other player's turn to make a move\r\n      // this.turn = (this.turn === 'X') ? 'O' : 'X';\r\n\r\n      // Publish move to the channel\r\n      this.props.pubnub.publish({\r\n        message: {\r\n          index: index,\r\n          piece: 'X',\r\n          turn: this.turn\r\n        },\r\n        channel: this.props.gameChannel\r\n      });  \r\n\r\n      // Check if there is a winner\r\n      this.checkForWinner()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let status;\r\n    // Change to current round\r\n    status = `${this.round}`;\r\n\r\n    return (\r\n      <div className=\"game\">\r\n        <div className=\"board\">\r\n          <Board\r\n              squares={this.state.squares}\r\n              size={this.props.size}\r\n              onClick={index => this.onMakeMove(index)}\r\n            />  \r\n            <p className=\"status-info\">Round: {status}</p>        \r\n        </div>\r\n        \r\n        <div className=\"scores-container\">\r\n          <div>\r\n            SCORES\r\n          </div>\r\n        </div>   \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;"]},"metadata":{},"sourceType":"module"}