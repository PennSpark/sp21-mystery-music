{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\egg\\\\Desktop\\\\UPenn\\\\sem 4\\\\pcl\\\\mystery music\\\\my-app\\\\src\\\\Game.js\";\nimport React from 'react';\nimport Board from './Board';\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst option_letters = ['A', 'B', 'C', 'D'];\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      display_question: false,\n      countdown: 10,\n      show_result: false,\n      selected_option: null,\n      disable_options: true,\n      total_score: 0,\n      index: 1,\n      display_top_users: false\n    };\n\n    this.newRound = () => {\n      var squares = this.state.squares;\n      squares = Array(8).fill(\"temp\");\n      this.round += 1;\n      this.answer = this.round;\n      this.setState({\n        // update squares\n        squares: squares\n      }); // update scores\n    };\n\n    this.timer = () => {\n      var timeleft = 10;\n      var timer = setInterval(function () {\n        if (timeleft <= 0) {\n          clearInterval(timer);\n          document.getElementById(\"countdown\").innerHTML = \"Finished\";\n          this.round += 1;\n          var x = this.round;\n          document.getElementById(\"status\").innerHTML = 'Round:' + x; //this.newRound();\n        } else {\n          document.getElementById(\"countdown\").innerHTML = timeleft + \" seconds remaining\";\n        }\n\n        timeleft -= 1;\n      }, 1000);\n    };\n\n    this.updateScore = winner => {// TODO: use this.player value to\n      // End the game once there is a winner\n      // this.gameOver = true;\n      // this.newRound(winner);\t\n    };\n\n    this.checkForWinner = () => {\n      // All rounds have been completed\n      if (this.round === 4) {\n        this.gameOver = true;\n\n        if (this.props.isRoomCreator) {\n          Swal.fire({\n            position: 'top',\n            allowOutsideClick: false,\n            title: 'Game Over',\n            text: 'Ready for next round?',\n            showCancelButton: true,\n            confirmButtonColor: 'rgb(208,33,41)',\n            cancelButtonColor: '#aaa',\n            cancelButtonText: 'Nope',\n            confirmButtonText: 'Yea!',\n            width: 275\n          }).then(result => {\n            // Start a new round\n            if (result.value) {\n              this.props.pubnub.publish({\n                message: {\n                  reset: true\n                },\n                channel: this.props.gameChannel\n              });\n            } else {\n              // End the game\n              this.props.pubnub.publish({\n                message: {\n                  endGame: true\n                },\n                channel: this.props.gameChannel\n              });\n            }\n          });\n        } else {\n          Swal.fire({\n            position: 'top',\n            allowOutsideClick: false,\n            title: 'Game Over',\n            text: 'Waiting for a new round...',\n            confirmButtonColor: 'rgb(208,33,41)',\n            width: 275\n          });\n        }\n      }\n    };\n\n    this.publishMove = (index, piece) => {\n      var squares = this.state.squares;\n      squares[index] = piece;\n      this.setState({\n        // update scores\n        squares: squares\n      });\n\n      if (index === this.answer) {\n        this.scores[index] += 1;\n      }\n\n      this.checkForWinner();\n    };\n\n    this.onMakeMove = index => {\n      var squares = this.state.squares; // Update chosen button to show that it's been clicked\n\n      if (squares[index]) {\n        squares[index] = 'X';\n        this.setState({\n          squares: squares\n        }); // Publish move to the channel\n\n        this.props.pubnub.publish({\n          message: {\n            index: index,\n            piece: 'X'\n          },\n          channel: this.props.gameChannel\n        }); // Check if there is a winner\n\n        this.checkForWinner();\n      }\n    };\n\n    this.state = {\n      // TODO: get number of players in game from database and replace 8\n      // also fill the squares with the player names in fillArray\n      squares: this.fillArray(8)\n    };\n    this.setState({\n      countdown: 10\n    });\n    this.player = this.props.player;\n    this.round = 0;\n    this.scores = Array(8).fill(0);\n    this.gameOver = false;\n    this.counter = 0;\n    this.answer = 0;\n  } // function for each new round\n\n\n  fillArray(size) {\n    var array = Array(size).fill();\n\n    for (var index = 0; index < array.length; index++) {\n      array[index] = index;\n    }\n\n    return array;\n  }\n\n  nextTurn(n) {\n    // TODO: get next player from api calls\n    // currently a placeholder\n    return Math.floor(Math.random() * n);\n  }\n\n  componentDidMount() {\n    this.timer();\n    this.props.pubnub.getMessage(this.props.gameChannel, msg => {\n      // Publish move to the opponent's board    \n      this.publishMove(msg.message.index, msg.message.piece); // Start a new game\n\n      if (msg.message.reset) {\n        this.setState({\n          // update scores\n          squares: this.fillArray(8)\n        });\n        this.round = 0;\n        this.scores = Array(8).fill(0);\n        this.gameOver = false;\n        this.counter = 0;\n        this.answer = 0;\n        Swal.close();\n      } // End the game and go back to the lobby\n      else if (msg.message.endGame) {\n          Swal.close();\n          this.props.endGame();\n        }\n    });\n  } // Update score if answer is correct\n\n\n  // Instructions\n  //   How to Play\n  // Up to 8 players may join a game, be sure to share the join code with your friends!\n  // During each round, the game will play a song from one of the playerâ€™s Spotify playlist.\n  // Players then have to select the user whose playlist they think the song is from.\n  // Correct answers get 1 point, and wrong answers get 0 points.\n  // After 20 rounds, the player with the most number of points wins!\n  render() {\n    let status; // Change to current round\n\n    status = `${this.round}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: [\"You are player \", this.player, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"prompt\",\n        children: [\"Guess who! \", this.answer]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: [/*#__PURE__*/_jsxDEV(Board, {\n          squares: this.state.squares,\n          size: this.props.size,\n          onClick: index => this.onMakeMove(index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"status\",\n          children: [\"Round: \", this.round]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"countdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scores-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"SCORES \", this.scores]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/egg/Desktop/UPenn/sem 4/pcl/mystery music/my-app/src/Game.js"],"names":["React","Board","Swal","option_letters","Game","Component","constructor","props","state","display_question","countdown","show_result","selected_option","disable_options","total_score","index","display_top_users","newRound","squares","Array","fill","round","answer","setState","timer","timeleft","setInterval","clearInterval","document","getElementById","innerHTML","x","updateScore","winner","checkForWinner","gameOver","isRoomCreator","fire","position","allowOutsideClick","title","text","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","width","then","result","value","pubnub","publish","message","reset","channel","gameChannel","endGame","publishMove","piece","scores","onMakeMove","fillArray","player","counter","size","array","length","nextTurn","n","Math","floor","random","componentDidMount","getMessage","msg","close","render","status"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Board from './Board';\r\nimport Swal from \"sweetalert2\";  \r\n\r\nconst option_letters = ['A', 'B', 'C', 'D'];\r\n\r\nclass Game extends React.Component {\r\n\r\n  state = {\r\n    display_question: false,\r\n    countdown: 10,\r\n    show_result: false,\r\n    selected_option: null,\r\n    disable_options: true,\r\n    total_score: 0,\r\n    \r\n    index: 1, \r\n   \r\n    display_top_users: false\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      // TODO: get number of players in game from database and replace 8\r\n      // also fill the squares with the player names in fillArray\r\n      squares: this.fillArray(8), \r\n      \r\n    };\r\n\r\n    this.setState({\r\n      countdown: 10,\r\n    });\r\n\r\n    this.player = this.props.player;\r\n    this.round = 0;\r\n    this.scores = Array(8).fill(0);\r\n    this.gameOver = false;\r\n    this.counter = 0;\r\n    this.answer = 0;\r\n  }\r\n\r\n  // function for each new round\r\n  newRound = () => {\r\n    var squares = this.state.squares;\r\n\r\n    squares = Array(8).fill(\"temp\");\r\n    this.round += 1;\r\n    this.answer = this.round;\r\n\r\n    this.setState({\r\n      // update squares\r\n      squares: squares,\r\n    });\r\n\r\n    // update scores\r\n  }\r\n\r\n  timer = () => {\r\n    var timeleft = 10;\r\n    var timer = setInterval(function(){\r\n      if (timeleft <= 0){\r\n        clearInterval(timer);\r\n        document.getElementById(\"countdown\").innerHTML = \"Finished\";\r\n        this.round += 1;\r\n        var x = this.round;\r\n        document.getElementById(\"status\").innerHTML = 'Round:' + x;\r\n        //this.newRound();\r\n      } else {\r\n        document.getElementById(\"countdown\").innerHTML = timeleft + \" seconds remaining\";\r\n      }\r\n      timeleft -= 1;\r\n    }, 1000);\r\n  }\r\n\r\n  fillArray(size) {\r\n    var array = Array(size).fill();\r\n    for (var index = 0; index < array.length; index++) {\r\n      array[index] = index;\r\n    }\r\n    return array;\r\n  }\r\n\r\n  nextTurn(n) {\r\n    // TODO: get next player from api calls\r\n    // currently a placeholder\r\n    return Math.floor(Math.random() * n);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timer();\r\n    this.props.pubnub.getMessage(this.props.gameChannel, (msg) => {\r\n\r\n      // Publish move to the opponent's board    \r\n      this.publishMove(msg.message.index, msg.message.piece);\r\n\r\n      // Start a new game\r\n      if(msg.message.reset){\r\n        this.setState({\r\n          // update scores\r\n          squares: this.fillArray(8),\r\n        });\r\n\r\n        this.round = 0;\r\n        this.scores = Array(8).fill(0);\r\n        this.gameOver = false;\r\n        this.counter = 0;\r\n        this.answer = 0;\r\n        Swal.close()\r\n      }\r\n\r\n      // End the game and go back to the lobby\r\n      else if(msg.message.endGame){\r\n        Swal.close();\r\n        this.props.endGame();\r\n      }\r\n    });\r\n  }\r\n\r\n\t// Update score if answer is correct\r\n  updateScore = (winner) => {\r\n    // TODO: use this.player value to\r\n\r\n\t\t// End the game once there is a winner\r\n\t\t// this.gameOver = true;\r\n\t\t// this.newRound(winner);\t\r\n  }\r\n  \r\n  checkForWinner = () => {\r\n\r\n    // All rounds have been completed\r\n    if (this.round === 4) {\r\n      this.gameOver = true;\r\n      if(this.props.isRoomCreator) {\r\n        Swal.fire({      \r\n              position: 'top',\r\n              allowOutsideClick: false,\r\n              title: 'Game Over',\r\n              text: 'Ready for next round?',\r\n              showCancelButton: true,\r\n              confirmButtonColor: 'rgb(208,33,41)',\r\n              cancelButtonColor: '#aaa',\r\n              cancelButtonText: 'Nope',\r\n              confirmButtonText: 'Yea!',\r\n              width: 275,\r\n            }).then((result) => {\r\n              // Start a new round\r\n              if (result.value) {\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    reset: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n              }\r\n      \r\n              else{\r\n                // End the game\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    endGame: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n              }\r\n            })      \r\n          \r\n      } else {\r\n      Swal.fire({  \r\n            position: 'top',\r\n            allowOutsideClick: false,\r\n            title: 'Game Over',\r\n            text: 'Waiting for a new round...',\r\n            confirmButtonColor: 'rgb(208,33,41)',\r\n            width: 275\r\n          });\r\n        }\r\n    }\r\n  };\r\n   \r\n  // Publishing an opponent's move onto the board\r\n  publishMove = (index, piece) => {\r\n    var squares = this.state.squares;\r\n\r\n    squares[index] = piece;\r\n\r\n    this.setState({\r\n      // update scores\r\n      squares: squares,\r\n    });\r\n    \r\n    if (index === this.answer) {\r\n      this.scores[index] += 1;\r\n    }\r\n\r\n    this.checkForWinner()\r\n  }\r\n\r\n  // Making a move on the board and publishing it\r\n  onMakeMove = (index) => {\r\n    var squares = this.state.squares;\r\n\r\n    // Update chosen button to show that it's been clicked\r\n    if(squares[index]) { \r\n      squares[index] = 'X';\r\n\r\n       this.setState({\r\n         squares: squares,\r\n       });\r\n\r\n      // Publish move to the channel\r\n      this.props.pubnub.publish({\r\n        message: {\r\n          index: index,\r\n          piece: 'X',\r\n        },\r\n        channel: this.props.gameChannel\r\n      });  \r\n\r\n      // Check if there is a winner\r\n      this.checkForWinner();\r\n    }\r\n  }\r\n\r\n// Instructions\r\n//   How to Play\r\n// Up to 8 players may join a game, be sure to share the join code with your friends!\r\n// During each round, the game will play a song from one of the playerâ€™s Spotify playlist.\r\n// Players then have to select the user whose playlist they think the song is from.\r\n// Correct answers get 1 point, and wrong answers get 0 points.\r\n// After 20 rounds, the player with the most number of points wins!\r\n\r\n  render() {\r\n\r\n    let status;\r\n    // Change to current round\r\n    status = `${this.round}`;\r\n\r\n    return (\r\n      <div className=\"game\">\r\n         You are player {this.player}\r\n        <div className=\"prompt\">\r\n          Guess who! {this.answer}\r\n        </div>\r\n        <br></br>\r\n        \r\n        <div className=\"board\">\r\n          <Board\r\n              squares={this.state.squares}\r\n              size={this.props.size}\r\n              onClick={index => this.onMakeMove(index)}\r\n            />  \r\n            <p id=\"status\">Round: {this.round}</p>    \r\n            <div id=\"countdown\"></div>      \r\n        </div>\r\n        \r\n        <div className=\"scores-container\">\r\n          <div>\r\n            SCORES {this.scores}\r\n          </div>\r\n        </div>   \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;"]},"metadata":{},"sourceType":"module"}