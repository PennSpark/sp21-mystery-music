{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\david\\\\mystery-music2\\\\sp21-mystery-music\\\\my-app\\\\src\\\\Game.js\";\nimport React from 'react';\nimport Board from './Board';\nimport Swal from \"sweetalert2\";\nimport './Game.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    /*\r\n    this.state = {\r\n      // TODO: get number of players in game from database and replace 8\r\n      // also fill the squares with the player names in fillArray\r\n      squares: this.fillArray(8), \r\n        };\r\n    this.round = 0;\r\n    this.scores = Array(8).fill(0);\r\n    this.gameOver = false;\r\n    this.counter = 0;\r\n    this.answer = 0;\r\n    */\n  }\n  /*\r\n    // function for each new round\r\n    newRound = () =>{\r\n      var squares = this.state.squares;\r\n  \r\n      squares = Array(8).fill(\"temp\");\r\n      this.round += 1;\r\n      this.answer = this.round;\r\n  \r\n      this.setState({\r\n        // update scores\r\n        squares: squares,\r\n      });\r\n    }\r\n  \r\n    timer = () => {\r\n      var timeleft = 10;\r\n      var timer = setInterval(function(){\r\n        if(timeleft <= 0){\r\n          clearInterval(timer);\r\n          document.getElementById(\"countdown\").innerHTML = \"Finished\";\r\n          this.round += 1;\r\n          var x = this.round;\r\n          document.getElementById(\"status\").innerHTML = 'Round:' + x;\r\n          this.newRound();\r\n        } else {\r\n          document.getElementById(\"countdown\").innerHTML = timeleft + \" seconds remaining\";\r\n        }\r\n        timeleft -= 1;\r\n      }, 1000);\r\n    }\r\n  \r\n    fillArray(size) {\r\n      var array = Array(size).fill();\r\n      for (var index = 0; index < array.length; index++) {\r\n        array[index] = index;\r\n      }\r\n      return array;\r\n    }\r\n  \r\n    nextTurn(n) {\r\n      // TODO: get next player from api calls\r\n      // currently a placeholder\r\n      return Math.floor(Math.random() * n);\r\n    }\r\n  \r\n    componentDidMount() {\r\n      this.timer();\r\n      this.props.pubnub.getMessage(this.props.gameChannel, (msg) => {\r\n  \r\n        // Publish move to the opponent's board    \r\n        this.publishMove(msg.message.index, msg.message.piece);\r\n  \r\n        // Start a new game\r\n        if(msg.message.reset){\r\n          this.setState({\r\n            // update scores\r\n            squares: this.fillArray(8),\r\n          });\r\n  \r\n          this.round = 0;\r\n          this.scores = Array(8).fill(0);\r\n          this.gameOver = false;\r\n          this.counter = 0;\r\n          this.answer = 0;\r\n          Swal.close()\r\n        }\r\n  \r\n        // End the game and go back to the lobby\r\n        else if(msg.message.endGame){\r\n          Swal.close();\r\n          this.props.endGame();\r\n        }\r\n      });\r\n    }\r\n  \r\n  \t// Update score for the winner\r\n    updateScore = (winner) => {\r\n      // TODO: Implement function\r\n  \r\n  \t\t// End the game once there is a winner\r\n  \t\t// this.gameOver = true;\r\n  \t\t// this.newRound(winner);\t\r\n    }\r\n    \r\n    checkForWinner = () => {\r\n  \r\n      // All rounds have been completed\r\n      if (this.round === 4) {\r\n        this.gameOver = true;\r\n        if(this.props.isRoomCreator) {\r\n          Swal.fire({      \r\n                position: 'top',\r\n                allowOutsideClick: false,\r\n                title: 'Game Over',\r\n                text: 'Ready for next round?',\r\n                showCancelButton: true,\r\n                confirmButtonColor: 'rgb(208,33,41)',\r\n                cancelButtonColor: '#aaa',\r\n                cancelButtonText: 'Nope',\r\n                confirmButtonText: 'Yea!',\r\n                width: 275,\r\n              }).then((result) => {\r\n                // Start a new round\r\n                if (result.value) {\r\n                  this.props.pubnub.publish({\r\n                    message: {\r\n                      reset: true\r\n                    },\r\n                    channel: this.props.gameChannel\r\n                  });\r\n                }\r\n        \r\n                else{\r\n                  // End the game\r\n                  this.props.pubnub.publish({\r\n                    message: {\r\n                      endGame: true\r\n                    },\r\n                    channel: this.props.gameChannel\r\n                  });\r\n                }\r\n              })      \r\n            \r\n        } else {\r\n        Swal.fire({  \r\n              position: 'top',\r\n              allowOutsideClick: false,\r\n              title: 'Game Over',\r\n              text: 'Waiting for a new round...',\r\n              confirmButtonColor: 'rgb(208,33,41)',\r\n              width: 275\r\n            });\r\n          }\r\n      }\r\n    };\r\n     \r\n    // Publishing an opponent's move onto the board\r\n    publishMove = (index, piece) => {\r\n      var squares = this.state.squares;\r\n  \r\n      squares[index] = piece;\r\n  \r\n      this.setState({\r\n        // update scores\r\n        squares: squares,\r\n      });\r\n      \r\n      if (index === this.answer) {\r\n        this.scores[index] += 1;\r\n      }\r\n  \r\n      this.checkForWinner()\r\n    }\r\n  \r\n    // Making a move on the board and publishing it\r\n    onMakeMove = (index) => {\r\n      var squares = this.state.squares;\r\n  \r\n      // Update chosen button to show that it's been clicked\r\n      if(squares[index]) { \r\n        squares[index] = 'X';\r\n  \r\n         this.setState({\r\n           squares: squares,\r\n         });\r\n  \r\n        // Publish move to the channel\r\n        this.props.pubnub.publish({\r\n          message: {\r\n            index: index,\r\n            piece: 'X',\r\n          },\r\n          channel: this.props.gameChannel\r\n        });  \r\n  \r\n        // Check if there is a winner\r\n        this.checkForWinner();\r\n      }\r\n    }\r\n  */\n  // Instructions\n  //   How to Play\n  // Up to 8 players may join a game, be sure to share the join code with your friends!\n  // During each round, the game will play a song from one of the player’s Spotify playlist.\n  // Players then have to select the user whose playlist they think the song is from.\n  // Correct answers get 1 point, and wrong answers get 0 points.\n  // After 20 rounds, the player with the most number of points wins!\n\n\n  render() {\n    /*\r\n    let status;\r\n    // Change to current round\r\n    status = `${this.round}`;\r\n    */\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"game\",\n      \"background-color\": \"#92b4a7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/david/mystery-music2/sp21-mystery-music/my-app/src/Game.js"],"names":["React","Board","Swal","Game","Component","constructor","props","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,YAAP;;;AAEA,MAAMC,IAAN,SAAmBH,KAAK,CAACI,SAAzB,CAAmC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEEC,EAAAA,MAAM,GAAG;AACP;AACJ;AACA;AACA;AACA;AACI,wBAGE;AACA,MAAA,KAAK,EAAC,MADN;AAEA,0BAAkB;AAFlB;AAAA;AAAA;AAAA;AAAA,YAHF;AAWD;;AA/NgC;;AAkOnC,eAAeJ,IAAf","sourcesContent":["import React from 'react';\r\nimport Board from './Board';\r\nimport Swal from \"sweetalert2\";  \r\nimport './Game.css';\r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /*\r\n    this.state = {\r\n      // TODO: get number of players in game from database and replace 8\r\n      // also fill the squares with the player names in fillArray\r\n      squares: this.fillArray(8), \r\n  \r\n    };\r\n    this.round = 0;\r\n    this.scores = Array(8).fill(0);\r\n    this.gameOver = false;\r\n    this.counter = 0;\r\n    this.answer = 0;\r\n    */\r\n  }\r\n/*\r\n  // function for each new round\r\n  newRound = () =>{\r\n    var squares = this.state.squares;\r\n\r\n    squares = Array(8).fill(\"temp\");\r\n    this.round += 1;\r\n    this.answer = this.round;\r\n\r\n    this.setState({\r\n      // update scores\r\n      squares: squares,\r\n    });\r\n  }\r\n\r\n  timer = () => {\r\n    var timeleft = 10;\r\n    var timer = setInterval(function(){\r\n      if(timeleft <= 0){\r\n        clearInterval(timer);\r\n        document.getElementById(\"countdown\").innerHTML = \"Finished\";\r\n        this.round += 1;\r\n        var x = this.round;\r\n        document.getElementById(\"status\").innerHTML = 'Round:' + x;\r\n        this.newRound();\r\n      } else {\r\n        document.getElementById(\"countdown\").innerHTML = timeleft + \" seconds remaining\";\r\n      }\r\n      timeleft -= 1;\r\n    }, 1000);\r\n  }\r\n\r\n  fillArray(size) {\r\n    var array = Array(size).fill();\r\n    for (var index = 0; index < array.length; index++) {\r\n      array[index] = index;\r\n    }\r\n    return array;\r\n  }\r\n\r\n  nextTurn(n) {\r\n    // TODO: get next player from api calls\r\n    // currently a placeholder\r\n    return Math.floor(Math.random() * n);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timer();\r\n    this.props.pubnub.getMessage(this.props.gameChannel, (msg) => {\r\n\r\n      // Publish move to the opponent's board    \r\n      this.publishMove(msg.message.index, msg.message.piece);\r\n\r\n      // Start a new game\r\n      if(msg.message.reset){\r\n        this.setState({\r\n          // update scores\r\n          squares: this.fillArray(8),\r\n        });\r\n\r\n        this.round = 0;\r\n        this.scores = Array(8).fill(0);\r\n        this.gameOver = false;\r\n        this.counter = 0;\r\n        this.answer = 0;\r\n        Swal.close()\r\n      }\r\n\r\n      // End the game and go back to the lobby\r\n      else if(msg.message.endGame){\r\n        Swal.close();\r\n        this.props.endGame();\r\n      }\r\n    });\r\n  }\r\n\r\n\t// Update score for the winner\r\n  updateScore = (winner) => {\r\n    // TODO: Implement function\r\n\r\n\t\t// End the game once there is a winner\r\n\t\t// this.gameOver = true;\r\n\t\t// this.newRound(winner);\t\r\n  }\r\n  \r\n  checkForWinner = () => {\r\n\r\n    // All rounds have been completed\r\n    if (this.round === 4) {\r\n      this.gameOver = true;\r\n      if(this.props.isRoomCreator) {\r\n        Swal.fire({      \r\n              position: 'top',\r\n              allowOutsideClick: false,\r\n              title: 'Game Over',\r\n              text: 'Ready for next round?',\r\n              showCancelButton: true,\r\n              confirmButtonColor: 'rgb(208,33,41)',\r\n              cancelButtonColor: '#aaa',\r\n              cancelButtonText: 'Nope',\r\n              confirmButtonText: 'Yea!',\r\n              width: 275,\r\n            }).then((result) => {\r\n              // Start a new round\r\n              if (result.value) {\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    reset: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n              }\r\n      \r\n              else{\r\n                // End the game\r\n                this.props.pubnub.publish({\r\n                  message: {\r\n                    endGame: true\r\n                  },\r\n                  channel: this.props.gameChannel\r\n                });\r\n              }\r\n            })      \r\n          \r\n      } else {\r\n      Swal.fire({  \r\n            position: 'top',\r\n            allowOutsideClick: false,\r\n            title: 'Game Over',\r\n            text: 'Waiting for a new round...',\r\n            confirmButtonColor: 'rgb(208,33,41)',\r\n            width: 275\r\n          });\r\n        }\r\n    }\r\n  };\r\n   \r\n  // Publishing an opponent's move onto the board\r\n  publishMove = (index, piece) => {\r\n    var squares = this.state.squares;\r\n\r\n    squares[index] = piece;\r\n\r\n    this.setState({\r\n      // update scores\r\n      squares: squares,\r\n    });\r\n    \r\n    if (index === this.answer) {\r\n      this.scores[index] += 1;\r\n    }\r\n\r\n    this.checkForWinner()\r\n  }\r\n\r\n  // Making a move on the board and publishing it\r\n  onMakeMove = (index) => {\r\n    var squares = this.state.squares;\r\n\r\n    // Update chosen button to show that it's been clicked\r\n    if(squares[index]) { \r\n      squares[index] = 'X';\r\n\r\n       this.setState({\r\n         squares: squares,\r\n       });\r\n\r\n      // Publish move to the channel\r\n      this.props.pubnub.publish({\r\n        message: {\r\n          index: index,\r\n          piece: 'X',\r\n        },\r\n        channel: this.props.gameChannel\r\n      });  \r\n\r\n      // Check if there is a winner\r\n      this.checkForWinner();\r\n    }\r\n  }\r\n*/\r\n// Instructions\r\n//   How to Play\r\n// Up to 8 players may join a game, be sure to share the join code with your friends!\r\n// During each round, the game will play a song from one of the player’s Spotify playlist.\r\n// Players then have to select the user whose playlist they think the song is from.\r\n// Correct answers get 1 point, and wrong answers get 0 points.\r\n// After 20 rounds, the player with the most number of points wins!\r\n\r\n  render() {\r\n    /*\r\n    let status;\r\n    // Change to current round\r\n    status = `${this.round}`;\r\n    */\r\n    return (\r\n \r\n\r\n      <div \r\n      class=\"game\" \r\n      background-color= \"#92b4a7\">\r\n        \r\n      </div>\r\n \r\n    \r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;"]},"metadata":{},"sourceType":"module"}